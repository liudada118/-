<script>
    Promise.myAll = function (promiseArr) {
        
        return new Promise((resolve, reject) => {
            let total = 0  //成功的个数
            let res = []
            promiseArr.forEach((pre,i)=>{
                pro.then(() => {
                    total++
                    if (total === promiseArr.length) {
                        // 所有的 promise 都成功了
                        resolve()
                    }
                })
                    .catch(reject)
            })
            for (let pro of promiseArr) {
                
            }
        })

    }
    Promise.myAll([p,p2,p1])
    .then(console.log)
</script>